# S3FileDeriver

## 目的

AWS S3とデバイス証明書で、S3をファイル転送サービス（例：データ便）のように使うことができます。

外に流出できない巨大なファイルを、AWS以外のサービスを挟まずに、メールで相手に送ることができます。

## 使い方

### 概要

1. S3に送信したいファイルを置く

2. デバイス証明書を発行、セキュリティを設定、ダウンロード用バッチを作成する（S3FileDeliverはここを担当します）

3. メールで証明書を送る

4. 証明書を受け取ったユーザーが、ファイルをダウンロードする

### 動作条件

受信側、送信側、どちらもWindows10で動作確認をしています。<br />
送信側は、`AWS CLI`と`Python`をインストールしてください。

### 環境構築

プロジェクトをCloneしてください。

```bash
git clone https://github.com/ShotaOki/s3FileDeriver.git
```

pythonにライブラリをインストールしてください。

```bash
pip install -r .\requirements.txt
```

### 送信側の手順

1. `create.bat`をダブルクリックして、証明書を発行します。<br />
　バケット名、ファイルのパス、AWSのプロファイル名<br />
を対話型コンソールで入力します。<br />
処理が完了すると、outputsフォルダにファイルが作成されます。

2. `convert.bat`をダブルクリックして、送信情報を作ります。<br />
　deploy-info.jsonのパス（create.batで作成したファイル）<br />
　設定パスワード（受信側に入力させるパスワード）<br />
を対話型コンソールで入力します。

3. `export`フォルダにあるファイルをメールで送ります。<br />
フォルダにあるファイルを、3つとも送信します。

### 受信側の手順

1. メールで受け取ったファイルを保存します。<br />
受け取ったファイルは3つとも同じフォルダに配置します。

2. `download.bat`をダブルクリックします。<br />
　パスワード（送信側が手順2で設定したパスワード）<br />
を対話型コンソールで入力します。
